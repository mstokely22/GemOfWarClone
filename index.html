<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover" />
  <title>Gems of Combat</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/meta.css" />
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GLOBAL HUD (gold bar, visible on most screens)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="global-hud" class="hidden">
  <div id="hud-gold-wrap">ğŸ’° <span id="hud-gold">0</span>g</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HOME SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-home" class="screen">
  <div id="home-bg"></div>
  <div id="home-content">
    <div id="home-logo">
      <div id="home-gem-row">
        <span class="hgem red">ğŸ”¥</span>
        <span class="hgem blue">ğŸ’§</span>
        <span class="hgem green">ğŸŒ¿</span>
        <span class="hgem yellow">âš¡</span>
        <span class="hgem purple">âœ¨</span>
      </div>
      <h1>GEMS OF COMBAT</h1>
      <div id="home-subtitle">Match Â· Cast Â· Conquer</div>
    </div>
    <div id="home-progress"></div>
    <div id="home-resource">ğŸ’° <span id="home-gold">0</span>g</div>
    <nav id="home-nav">
      <button id="btn-battle" class="home-btn battle-btn">
        <span class="hbtn-icon">âš”ï¸</span>
        <span class="hbtn-label">Battle</span>
        <span class="hbtn-sub">Choose your level</span>
      </button>
      <button id="btn-heroes" class="home-btn heroes-btn">
        <span class="hbtn-icon">ğŸ§‘</span>
        <span class="hbtn-label">Heroes</span>
        <span class="hbtn-sub">View your roster</span>
      </button>
      <button id="btn-packs" class="home-btn packs-btn">
        <span class="hbtn-icon">ğŸ“¦</span>
        <span class="hbtn-label">Card Packs</span>
        <span class="hbtn-sub">Unlock new heroes</span>
      </button>
    </nav>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     LEVEL MAP SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-map" class="screen hidden">
  <div class="screen-header">
    <button class="back-btn" onclick="renderHome()">â† Home</button>
    <h2>World Map</h2>
    <div class="header-gold">ğŸ’° <span id="map-gold">0</span>g</div>
  </div>
  <div id="map-scroll">
    <div id="map-nodes"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     TEAM BUILDER SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-team" class="screen hidden">
  <div class="screen-header">
    <button class="back-btn" onclick="renderMap()">â† Map</button>
    <h2 id="team-level-title">Level 1</h2>
    <div class="header-gold">ğŸ’° <span id="team-gold">0</span>g</div>
  </div>
  <div id="team-body">
    <div id="team-col-left">
      <div class="section-label">Your Team (tap slot to change)</div>
      <div id="team-slots"></div>
      <button id="launch-battle-btn" onclick="launchBattle()">âš”ï¸ Go to Battle!</button>
    </div>
    <div id="team-col-right">
      <div class="section-label">Enemies you'll face</div>
      <div id="team-enemy-preview"></div>
    </div>
  </div>

  <!-- Hero Picker Overlay -->
  <div id="hero-picker-overlay" class="hidden">
    <div id="hero-picker-box">
      <div id="picker-header">
        <span>Choose a Hero</span>
        <button onclick="closePicker()">âœ•</button>
      </div>
      <div id="picker-grid"></div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     BATTLE SCREEN  (contains original game-container)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-battle" class="screen hidden">
  <div id="game-container">
    <div id="battle-area">
      <!-- Player Panel -->
      <div id="player-panel" class="team-panel">
        <div class="panel-label">Your Team</div>
        <div id="player-troops" class="troops-list"></div>
      </div>

      <!-- Board + Broadcast -->
      <div id="center-column">
        <div id="board-wrap">
          <div id="game-board"></div>
          <!-- Broadcast overlay â€” shown for big moments -->
          <div id="broadcast" class="hidden">
            <div id="broadcast-inner"></div>
          </div>
        </div>
        <div id="mana-legend">
          <span class="legend-item red">ğŸ”¥</span>
          <span class="legend-item blue">ğŸ’§</span>
          <span class="legend-item green">ğŸŒ¿</span>
          <span class="legend-item yellow">âš¡</span>
          <span class="legend-item purple">âœ¨</span>
          <span class="legend-item brown">ğŸª¨</span>
          <span class="legend-item skull">ğŸ’€</span>
        </div>
      </div>

      <!-- Enemy Panel -->
      <div id="enemy-panel" class="team-panel">
        <div class="panel-label">Enemy Team</div>
        <div id="enemy-troops" class="troops-list"></div>
      </div>
    </div>
  </div>

  <!-- Battle Overlay (victory/defeat) -->
  <div id="overlay" class="hidden">
    <div id="overlay-content">
      <div id="overlay-title"></div>
      <div id="overlay-msg"></div>
      <div id="overlay-btns">
        <button id="overlay-btn-map"   onclick="window.onBattleEnd && window.onBattleEnd(window._lastBattleWon)">ğŸ—º Return to Map</button>
        <button id="overlay-btn-retry" onclick="window.BATTLE && window.BATTLE.retry()">ğŸ”„ Retry</button>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     VICTORY REWARDS SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-victory" class="screen hidden">
  <div id="victory-box">
    <div id="victory-title">ğŸ† VICTORY!</div>
    <div id="vict-level"></div>
    <div id="victory-rewards">
      <div id="vict-gold" class="reward-row"></div>
      <div id="vict-pack" class="reward-row"></div>
    </div>
    <div id="victory-btns">
      <button onclick="victToContinue()" class="vict-btn">ğŸ—º World Map</button>
      <button onclick="victNextLevel()" class="vict-btn primary" id="vict-next">â–¶ Next Level</button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HEROES COLLECTION SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-heroes" class="screen hidden">
  <div class="screen-header">
    <button class="back-btn" onclick="renderHome()">â† Home</button>
    <h2>Hero Collection</h2>
    <div class="header-gold">ğŸ’° <span id="heroes-gold">0</span>g</div>
  </div>
  <div id="heroes-scroll">
    <div id="heroes-grid"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CARD PACKS SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-packs" class="screen hidden">
  <div class="screen-header">
    <button class="back-btn" onclick="renderHome()">â† Home</button>
    <h2>Card Packs</h2>
    <div class="header-gold">ğŸ’° <span id="packs-gold">0</span>g</div>
  </div>
  <div id="packs-body">
    <div id="free-packs-notice"></div>
    <div id="packs-grid"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GACHA / PACK OPENING SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-gacha" class="screen hidden">
  <div id="gacha-body">
    <div id="gacha-title">Opening: <span id="gacha-pack-name"></span></div>
    <div id="gacha-card-wrap">
      <div id="gacha-card-back">
        <div id="gacha-card-back-inner">ğŸ“¦</div>
      </div>
      <div id="gacha-card-front">
        <div id="gacha-new-badge" class="gacha-badge"></div>
        <div id="gacha-hero-emoji" class="gacha-hero-e"></div>
        <div id="gacha-hero-name" class="gacha-hero-n"></div>
        <div id="gacha-hero-rarity" class="gacha-hero-r"></div>
        <div id="gacha-hero-stats" class="gacha-hero-stats"></div>
        <div id="gacha-hero-spell" class="gacha-hero-spell"></div>
        <div id="gacha-hero-desc" class="gacha-hero-desc"></div>
      </div>
    </div>
    <div id="gacha-result-info" class="hidden"></div>
    <button id="gacha-collect-btn" class="hidden" onclick="collectGachaResult()">âœ” Collect</button>
  </div>
</div>

<!-- Portrait rotation nag (shown via CSS on touch portrait devices) -->
<div id="portrait-nag">
  <div id="portrait-nag-icon">ğŸ“±</div>
  <div id="portrait-nag-title">Rotate Your Device</div>
  <div id="portrait-nag-sub">Gems of Combat plays in landscape mode</div>
  <div id="portrait-nag-arrow">â†»</div>
</div>

<script src="js/app.js"></script>
<script src="js/game.js"></script>
</body>
</html>
